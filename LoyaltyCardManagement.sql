
CREATE TABLE LOYALTY_CARD (
ID INT NOT NULL AUTO_INCREMENT,
CODE VARCHAR(20) NOT NULL,
PHONE VARCHAR(25) NOT NULL,
LOYALTY_CART_TYPE_ID INT,
POINT DECIMAL(4,2) NOT NULL,
TOTAL_SPENT DECIMAL(10) NOT NULL,
START_DATE TIMESTAMP NOT NULL,
END_DATE TIMESTAMP NOT NULL,
CREATED_ON TIMESTAMP NOT NULL,
MODIFIED_ON TIMESTAMP NOT NULL,
PRIMARY KEY(ID)
);


CREATE TABLE LOYALTY_CARD_TYPE (
ID INT NOT NULL AUTO_INCREMENT,
NAME VARCHAR(50) CHARACTER SET utf8 COLLATE utf8_unicode_ci NOT NULL,
SPENT_THRESHOLD DECIMAL(10) NOT NULL,
DURATION DECIMAL(10) NOT NULL,
DISCOUNT_PERCENT DECIMAL(3,2) NOT NULl,
CREATED_ON TIMESTAMP NOT NULL,
MODIFIED_ON TIMESTAMP NOT NULL,
PRIMARY KEY(ID)
);

CREATE TABLE CONFIG (
CONFIG INT NOT NULL
);

CREATE TABLE TRANSACTION (
ID INT NOT NULL AUTO_INCREMENT,
LOYALTY_CARD_ID INT NOT NULL,
POINT_ADJUST DECIMAL(4,2) NOT NULL,
SPENT_ADJUST DECIMAL(10) NOT NULL,
CREATED_ON TIMESTAMP NOT NULL,
PRIMARY KEY(ID)
);


INSERT INTO LOYALTY_CARD_TYPE (NAME,SPENT_THRESHOLD,DURATION,DISCOUNT_PERCENT,CREATED_ON,MODIFIED_ON)
VALUES ('Thẻ chuẩn',0,365,0.01,STR_TO_DATE('03/08/2009', '%m/%d/%Y'),STR_TO_DATE('03/08/2009', '%m/%d/%Y')),
	   ('Thẻ bạc',5000000,365,0.02,STR_TO_DATE('03/08/2009', '%m/%d/%Y'),STR_TO_DATE('03/08/2009', '%m/%d/%Y')),
       ('Thẻ vàng',10000000,365,0.05,STR_TO_DATE('03/08/2009', '%m/%d/%Y'),STR_TO_DATE('03/08/2009', '%m/%d/%Y')),
       ('Thẻ bạch kim',20000000,365,0.07,STR_TO_DATE('03/08/2009', '%m/%d/%Y'),STR_TO_DATE('03/08/2009', '%m/%d/%Y')),
       ('Thẻ kim cương',50000000,365,0.1,STR_TO_DATE('03/08/2009', '%m/%d/%Y'),STR_TO_DATE('03/08/2009', '%m/%d/%Y'));



INSERT INTO LOYALTY_CARD  (CODE,PHONE,LOYALTY_CART_TYPE_ID,POINT,TOTAL_SPENT,START_DATE,END_DATE,CREATED_ON,MODIFIED_ON)
VALUES  ('LT0001','987654321',1,23.45,0,STR_TO_DATE('03/08/2009', '%m/%d/%Y'),STR_TO_DATE('03/08/2009', '%m/%d/%Y'),STR_TO_DATE('03/08/2009', '%m/%d/%Y'),STR_TO_DATE('03/08/2009', '%m/%d/%Y'));
   

       